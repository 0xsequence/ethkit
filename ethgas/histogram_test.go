package ethgas

import (
	"math/big"
	"testing"

	"github.com/stretchr/testify/require"
)

func TestGasPriceHistogram(t *testing.T) {
	prices := []*big.Int{
		big.NewInt(50194599653),
		big.NewInt(51098044752),
		big.NewInt(51098044752),
		big.NewInt(52621431633),
		big.NewInt(52751229408),
		big.NewInt(52951916455),
		big.NewInt(54247416415),
		big.NewInt(55560857523),
		big.NewInt(56143790224),
		big.NewInt(56693739575),
		big.NewInt(59908810569),
		big.NewInt(64000000000),
		big.NewInt(64000000000),
		big.NewInt(64000000000),
		big.NewInt(64000000000),
		big.NewInt(64000000000),
		big.NewInt(65252979548),
		big.NewInt(65390806164),
		big.NewInt(72816031286),
		big.NewInt(73742998752),
		big.NewInt(74736163398),
		big.NewInt(74736163398),
		big.NewInt(74736163398),
		big.NewInt(74736163398),
		big.NewInt(74736163398),
		big.NewInt(75242863266),
		big.NewInt(75990382873),
		big.NewInt(75990382873),
		big.NewInt(75990382873),
		big.NewInt(76647067128),
		big.NewInt(76647067128),
		big.NewInt(76647077128),
		big.NewInt(77413537799),
		big.NewInt(77413537799),
		big.NewInt(80250013656),
		big.NewInt(80250013656),
		big.NewInt(88021067710),
		big.NewInt(94232293440),
		big.NewInt(96831935030),
		big.NewInt(113133907359),
		big.NewInt(123049407008),
		big.NewInt(127688602500),
		big.NewInt(131193156896),
		big.NewInt(131553579082),
		big.NewInt(136066610534),
		big.NewInt(138350648492),
		big.NewInt(186000000000),
		big.NewInt(186000000000),
		big.NewInt(186000000000),
		big.NewInt(186000000000),
		big.NewInt(186000000000),
		big.NewInt(186000000000),
		big.NewInt(186000000000),
		big.NewInt(186000000000),
		big.NewInt(186000000000),
		big.NewInt(186000000000),
		big.NewInt(186000000000),
		big.NewInt(186000000000),
		big.NewInt(186000000000),
		big.NewInt(186000000000),
		big.NewInt(272301328714),
		big.NewInt(315000000000),
		big.NewInt(315000000000),
		big.NewInt(49130620939),
		big.NewInt(49130620939),
		big.NewInt(50194599653),
		big.NewInt(51557452919),
		big.NewInt(52539437403),
		big.NewInt(52539437403),
		big.NewInt(52621431633),
		big.NewInt(52751229408),
		big.NewInt(53300847192),
		big.NewInt(53858781633),
		big.NewInt(54247416415),
		big.NewInt(55560857523),
		big.NewInt(55637635843),
		big.NewInt(55637635843),
		big.NewInt(56143790224),
		big.NewInt(63557452919),
		big.NewInt(63557452919),
		big.NewInt(63557452919),
		big.NewInt(64000000000),
		big.NewInt(64000000000),
		big.NewInt(64000000000),
		big.NewInt(64000000000),
		big.NewInt(64000000000),
		big.NewInt(65252979548),
		big.NewInt(67122785457),
		big.NewInt(68057452919),
		big.NewInt(68057452919),
		big.NewInt(68103952919),
		big.NewInt(68103952919),
		big.NewInt(69556191745),
		big.NewInt(74509369374),
		big.NewInt(74736163398),
		big.NewInt(74736163398),
		big.NewInt(74736163398),
		big.NewInt(74736163398),
		big.NewInt(74736163398),
		big.NewInt(76647077128),
		big.NewInt(77830927290),
		big.NewInt(78251192494),
		big.NewInt(81466263488),
		big.NewInt(82077513316),
		big.NewInt(83557452919),
		big.NewInt(83557452919),
		big.NewInt(83557452919),
		big.NewInt(83557452919),
		big.NewInt(83557452919),
		big.NewInt(83557452919),
		big.NewInt(83557452919),
		big.NewInt(83557452919),
		big.NewInt(83557452919),
		big.NewInt(83557452919),
		big.NewInt(83557452919),
		big.NewInt(83557452919),
		big.NewInt(83557452919),
		big.NewInt(83557452919),
		big.NewInt(88021067710),
		big.NewInt(113133907359),
		big.NewInt(115789746359),
		big.NewInt(126557452919),
		big.NewInt(126557452919),
		big.NewInt(131193156896),
		big.NewInt(131553579082),
		big.NewInt(149246055419),
	}

	hist := gasPriceHistogram(prices)
	require.Equal(t, 19, len(hist))
}
